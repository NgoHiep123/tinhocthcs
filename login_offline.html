<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ” ÄÄƒng nháº­p (Offline) | Tin há»c THCS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      background-attachment: fixed;
    }
    .login-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      animation: slideUp 0.6s ease-out;
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .input-field:focus {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
    }
    .login-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s ease;
    }
    .login-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4);
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
  <div class="login-card w-full max-w-md rounded-3xl p-8 shadow-2xl">
    <div class="text-center mb-6">
      <div class="inline-block p-4 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl shadow-xl mb-3">
        <span class="text-5xl">ğŸ”</span>
      </div>
      <h1 class="text-3xl font-black text-gray-900 mb-2">ÄÄƒng nháº­p</h1>
      <p class="text-gray-600">ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i há»‡ thá»‘ng Tin há»c THCS!</p>
      <p class="text-xs text-orange-600 mt-2">ğŸ“Œ PhiÃªn báº£n offline (dá»¯ liá»‡u nhÃºng trong code)</p>
    </div>

    <div class="space-y-4">
      <div>
        <label class="block mb-2 text-sm font-bold text-gray-700">ğŸ“ Chá»n khá»‘i</label>
        <select id="grade" class="input-field w-full rounded-xl bg-white border-2 border-gray-200 focus:border-purple-500 px-4 py-3 text-gray-900 font-semibold outline-none transition-all">
          <option value="">-- Chá»n khá»‘i --</option>
        </select>
      </div>
      <div>
        <label class="block mb-2 text-sm font-bold text-gray-700">ğŸ« Chá»n lá»›p</label>
        <select id="class" class="input-field w-full rounded-xl bg-white border-2 border-gray-200 focus:border-purple-500 px-4 py-3 text-gray-900 font-semibold outline-none transition-all" disabled>
          <option value="">-- Chá»n lá»›p --</option>
        </select>
      </div>
      <div>
        <label class="block mb-2 text-sm font-bold text-gray-700">ğŸ‘¤ Há» vÃ  tÃªn</label>
        <select id="student" class="input-field w-full rounded-xl bg-white border-2 border-gray-200 focus:border-purple-500 px-4 py-3 text-gray-900 font-semibold outline-none transition-all" disabled>
          <option value="">-- Chá»n tÃªn --</option>
        </select>
      </div>
      <div>
        <label class="block mb-2 text-sm font-bold text-gray-700">ğŸ”‘ Máº­t kháº©u</label>
        <input id="password" type="password" class="input-field w-full rounded-xl bg-white border-2 border-gray-200 focus:border-purple-500 px-4 py-3 text-gray-900 font-semibold outline-none transition-all" placeholder="Nháº­p máº­t kháº©u cá»§a báº¡n">
        <p class="text-xs text-gray-500 mt-2">ğŸ’¡ Máº­t kháº©u máº·c Ä‘á»‹nh: <strong>123456</strong></p>
      </div>
      <div class="flex items-center justify-between mt-6 pt-4 border-t border-gray-200">
        <a href="index.html" class="text-sm text-purple-600 hover:text-purple-800 font-semibold transition-colors">â¬… Vá» trang chá»§</a>
        <button id="loginBtn" class="login-btn px-6 py-3 rounded-xl text-white font-black shadow-lg">
          â–¶ï¸ VÃ o lÃ m bÃ i
        </button>
      </div>
      <p id="status" class="text-sm text-red-500 text-center font-semibold min-h-[24px] mt-3"></p>
    </div>
  </div>

<script>
// ===== Dá»® LIá»†U NHÃšNG (Demo - 1 lá»›p má»—i khá»‘i) =====
const DATA = {
  "6": {
    "6/14": [
      {"name": "LÆ°u Nguyá»…n Tháº¿ Anh", "pass_hash": "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"},
      {"name": "Äá»— Trung Anh", "pass_hash": "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"},
      {"name": "Nguyá»…n Pháº¡m Gia Báº£o", "pass_hash": "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"}
    ]
  },
  "7": {
    "7/19": [
      {"name": "Tráº§n ThÃ¡i An", "pass_hash": "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"},
      {"name": "Pháº¡m LÃª Nguyá»‡t Ãnh", "pass_hash": "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"},
      {"name": "BÃ¹i Tuáº¥n Gia Báº£o", "pass_hash": "8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92"}
    ]
  }
};

const statusEl = document.getElementById('status');
const gradeSelect = document.getElementById('grade');
const classSelect = document.getElementById('class');
const studentSelect = document.getElementById('student');

// Load khá»‘i
const grades = Object.keys(DATA).sort((a,b)=>parseInt(a)-parseInt(b));
gradeSelect.innerHTML = '<option value="">-- Chá»n khá»‘i --</option>' + 
  grades.map(g=>`<option value="${g}">Khá»‘i ${g}</option>`).join('');

// Chá»n khá»‘i
gradeSelect.addEventListener('change', e=>{
  const g = e.target.value;
  studentSelect.innerHTML = '<option value="">-- Chá»n tÃªn --</option>';
  studentSelect.disabled = true;
  
  if(!g){
    classSelect.innerHTML = '<option value="">-- Chá»n lá»›p --</option>';
    classSelect.disabled = true;
    return;
  }
  
  const classes = Object.keys(DATA[g]||{}).sort();
  classSelect.innerHTML = '<option value="">-- Chá»n lá»›p --</option>' + 
    classes.map(c=>`<option value="${c}">${c}</option>`).join('');
  classSelect.disabled = false;
});

// Chá»n lá»›p
classSelect.addEventListener('change', e=>{
  const g = gradeSelect.value;
  const c = e.target.value;
  
  if(!c){
    studentSelect.innerHTML = '<option value="">-- Chá»n tÃªn --</option>';
    studentSelect.disabled = true;
    return;
  }
  
  const students = (DATA[g]?.[c]||[]).map(s=>s.name);
  studentSelect.innerHTML = '<option value="">-- Chá»n tÃªn --</option>' + 
    students.map(n=>`<option value="${n}">${n}</option>`).join('');
  studentSelect.disabled = false;
});

// SHA-256 hash
async function sha256Hex(str){
  const enc = new TextEncoder().encode(str);
  const buf = await crypto.subtle.digest('SHA-256', enc);
  const arr = Array.from(new Uint8Array(buf));
  return arr.map(b=>b.toString(16).padStart(2,'0')).join('');
}

// Login
document.getElementById('loginBtn').addEventListener('click', async ()=>{
  statusEl.textContent = '';
  const g = gradeSelect.value;
  const c = classSelect.value;
  const n = studentSelect.value;
  const pw = document.getElementById('password').value.trim();
  
  if(!g || !c || !n || !pw){
    statusEl.textContent='Vui lÃ²ng chá»n Ä‘á»§ thÃ´ng tin vÃ  nháº­p máº­t kháº©u.';
    return;
  }

  const list = DATA[g]?.[c] || [];
  const rec = list.find(x=>x.name===n);
  if(!rec){
    statusEl.textContent='KhÃ´ng tÃ¬m tháº¥y há»c sinh.';
    return;
  }

  const hash = await sha256Hex(pw);
  if(hash !== rec.pass_hash){
    statusEl.textContent='Máº­t kháº©u khÃ´ng Ä‘Ãºng. (Thá»­: 123456)';
    return;
  }

  const student = {
    grade: g,
    className: c,
    name: n,
    loginAt: new Date().toISOString()
  };
  localStorage.setItem('student', JSON.stringify(student));

  const qp = new URLSearchParams(location.search);
  const next = qp.get('next') || 'index.html';
  location.href = next;
});

console.log('âœ… Loaded offline version with embedded data');
console.log('â„¹ï¸  Test accounts: Khá»‘i 6/7, báº¥t ká»³ lá»›p/tÃªn, MK: 123456');
</script>

</body>
</html>

